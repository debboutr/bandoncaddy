{% extends 'base.html' %}

{% block title %}Add Work{% endblock %}

{% block content %}
  {% if form.errors %}
    <p>there are issues with your form...</p>
  {% endif %}
    <h1>Record your loop...</h1>
    <div class="flex-row">
    {% for course in courses %}
    <img src="{{ course.image.url }}" class="course" data-course="{{ course.id }}" alt="{{ course }}">
    {% endfor %}
    </div>
    <form action="{% url 'add_work' %}" method="POST">
      {% csrf_token %}
      {% for field in form.visible_fields %}
	<p class="form-fields">
	  {{ field }}
	  {{ field.errors }}
	  {% if forloop.first %}
	  check
	  {% endif %}
	  {% if forloop.last %}
	    <button type="button" onclick="window.location='{% url 'add_person' %}'">+</button>   
	  {% endif %}
	</p>
      {% endfor %}
      {% for hidden in form.hidden_fields %}
	  {{ hidden }}
      {% endfor %}
      <input type="submit" value="submit">
    </form>
    <script>
      let course = document.getElementById('id_course')
      document.querySelectorAll('.course').forEach(element => {
	element.addEventListener('click', function() {
	  // Remove the toggle class from all elements
	  document.querySelectorAll('.course').forEach(el => {
	    el.classList.remove('course-highlight');
	  });
	  // Add the toggle class to the clicked element
	  this.classList.add('course-highlight');
	  course.value = element.dataset.course
	});
      });
    </script>
{% endblock %}   
